<!DOCTYPE html>
<html>
	<head>
		<title>Main and Distant Signals</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<base href="../../../../" />
		<link type="text/css" rel="stylesheet" href="include/css/default.css" title="default" media="all" />

		<script>
			;(function($){
				$(function(){
					var base_path = "/img/railways/signalling/qevelia/";
					var mainAspects = {
						"00":   "r",
						"36":   "y",
						"60":   "yf",
						"100":  "gf",
						"vmax": "g",
						"sh":   "rl",
						"co":   "rlf"
					};

					var distAspects = {
						"00":   "yy",
						"36":   "gy",
						"60":   "gyf2",
						"100":  "ggf2",
						"vmax": "gg",
						"sh":   "yy",
						"co":   "yy"
					};

					var dAcceptImg = $("#dAccept"),
					mAcceptImg = $("#mAccept");

					var dStartImg = $("#dStart"),
					mStartImg = $("#mStart");

					// Default positions
					var dA = distAspects["00"],
					mA = mainAspects["00"];

					var dS = distAspects["00"],
					mS = mainAspects["00"];


					$("#acceptSignal").bind("change", function(e) {
						var acceptAspect = $("#acceptSignal").find("option:selected").attr("value");
						var startAspect = $("#startSignal").find("option:selected").attr("value");

						var acceptAtStop = acceptAspect == "00" || acceptAspect == "sh" || acceptAspect == "co";

						dA = distAspects[$(this).find("option:selected").attr("value")];
						mA = mainAspects[$(this).find("option:selected").attr("value")];

						dAcceptImg.attr({src: base_path + "cl/d4a_" + dA + ".png"});
						mAcceptImg.attr({src: base_path + "cl/m3cs_" + mA + ".png"});

						if(acceptAtStop) {
							dStartImg.attr({src: base_path + "cl/d4a_off.png"});
						}
						else {
							dStartImg.attr({src: base_path + "cl/d4a_" + dS + ".png"});
						}

						//	if(acceptAspect == "60") {
							//		dStartImg.addClass("d4a_gyf2 animate");
							//	}

					});

					$("#startSignal").bind("change", function(e) {
						var acceptAspect = $("#acceptSignal").find("option:selected").attr("value");
						var startAspect = $("#startSignal").find("option:selected").attr("value");

						var acceptAtStop = acceptAspect == "00" || acceptAspect == "sh" || acceptAspect == "co";

						dS = distAspects[$(this).find("option:selected").attr("value")];
						mS = mainAspects[$(this).find("option:selected").attr("value")];

						mStartImg.attr({src: base_path + "cl/m3cs_" + mS + ".png"});


						if(acceptAtStop) {
							dStartImg.attr({src: base_path + "cl/d4a_off.png"});
						}
						else {
							dStartImg.attr({src: base_path + "cl/d4a_" + dS + ".png"});
						}

					});
				});
			})(jQuery);
		</script>

		<script type="text/javascript" src="/include/js/jquery.dataset.js"></script>
		<script type="text/javascript" src="/include/js/jquery.animateimg.js"></script>
		<script type="text/javascript" src="/include/js/qz_signal_animations.js"></script>


	</head>
	<body>
		<div id="body">

			<h1 class="title">Qevelian Railway Signalling</h1>

			<h1>Main and Distant Signals</h1>

			<h2>Sequence of Operation</h2>

			<p>This is a demonstration of how the main/distant signals function. Use the drop-down lists to choose a signal aspect for the Accepting and Starting signals, and observe how the distant for each changes. </p>

			<table>
				<colgroup>
					<col width="30%" />
					<col width="30%" />
					<col width="30%" />
				</colgroup>
				<tr>
					<th>Distant Accept</th>
					<th>Accept<br />
						Distant Starting</th>
					<th>Starting</th>
				</tr>
				<tr>
					<td class="vb">
						<div class="signal">
							<img src="cl/d4a_yy.png" id="dAccept" alt="" />
							<img src="post/p2-unit-40.png" alt="" />
							<img src="sign/pp-distant-1.png" alt="" />
							<img src="post/p2-base.png" alt="" />
						</div>
					</td>
					<td class="vb">
						<div class="signal">
							<img src="cl/m3cs_r.png" id="mAccept" alt="" />
							<img src="cl/d4a_off.png" id="dStart" alt="" />
							<img src="post/p2-unit-40.png" alt="" />
							<img src="sign/pp-combined.png" alt="" />
							<img src="post/p2-base.png" alt="" />
						</div>
					</td>
					<td class="vb">
						<div class="signal">
							<img src="cl/m3cs_r.png" id="mStart" alt="" />
							<img src="post/p2-unit-40.png" alt="" />
							<img src="sign/pp-main-1.png" alt="" />
							<img src="post/p2-base.png" alt="" />
						</div>
					</td>
				</tr>
				<tr>
					<td></td>
					<td>
						<form>
							<select id="acceptSignal">
								<option value="00" selected="selected">Stop</option>
								<option value="sh">Stop + Shunting</option>
								<option value="co">Stop + Call-on</option>
								<option value="36">Clear with 36 km/h</option>
								<option value="60">Clear with 60 km/h</option>
								<option value="100">Clear with 100 km/h</option>
								<option value="vmax">Clear</option>
							</select>
						</form>
					</td>
					<td>
						<form>
							<select id="startSignal">
								<option value="00" selected="selected">Stop</option>
								<option value="sh">Stop + Shunting</option>
								<!--<option value="co">Stop + Call-on</option>-->
								<option value="36">Clear with 36 km/h</option>
								<option value="60">Clear with 60 km/h</option>
								<option value="100">Clear with 100 km/h</option>
								<option value="vmax">Clear</option>
							</select>
						</form>
					</td>
				</tr>
			</table>


		</div>
	</body>
</html>
